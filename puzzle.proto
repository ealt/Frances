syntax = "proto3";

package frances;

enum FurnitureType {
    CHAIR = 0;
    BED = 1;
    CARPET = 2;
    PLANT = 3;
    TV = 4;
    TABLE = 5;
}

enum Gender {
    UNSPECIFIED_GENDER = 0;
    FEMALE = 1;
    MALE = 2;
}

enum Role {
    UNSPECIFIED_ROLE = 0;
    SUSPECT = 1;
    VICTIM = 2;
}

message IntArray {
    repeated int32 values = 1;
}

message Coordinate {
    int32 row = 1;
    int32 column = 2;
}

message VerticalBorder {
    int32 row = 1;
    int32 right = 2;
}

message HorizontalBorder {
    int32 column = 1;
    int32 bottom = 2;
}

message Position {
    int32 person_id = 1;
    Coordinate coordinate = 2;
}

message Room {
    int32 id = 1;
    string name = 2;
}

message Window {
    oneof border {
        VerticalBorder vertical_border = 1;
        HorizontalBorder horizontal_border = 2;
    }
}

message Furniture {
    FurnitureType type = 1;
    bool occupiable = 2;
    repeated Coordinate coordinates = 3;
}

message CrimeScene {
    repeated Room rooms = 1;
    repeated IntArray floor_plan = 2;
    repeated Window windows = 3;
    repeated Furniture furniture = 4;
}

message Person {
    int32 id = 1;
    string name = 2;
    Gender gender = 3;
    Role role = 4;
}

message RoomClue {
    int32 room_id = 1;
    bool is_occupied = 2;
}

message PersonClue {
    int32 person_id = 1;
    bool negate = 2;
    oneof type {
        int32 room_id = 3;
        bool beside_window = 4;
        FurnitureType beside = 5;
        FurnitureType on = 6;
        FurnitureType same_row = 7;
        FurnitureType same_column = 8;
        FurnitureType same_room = 9;
        bool in_corner = 10;
    }
}

message Clue {
    oneof type {
        RoomClue room_clue = 1;
        PersonClue person_clue = 2;
    }
}

message Solution {
    repeated Position positions = 1;
    int32 murderer_id = 2;
}

message Puzzle {
    string name = 1;
    CrimeScene crime_scene = 2;
    repeated Person people = 3;
    repeated Clue clues = 4;
    Solution solution = 5;
}